<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Giỏ hàng</title>
    <link
      rel="icon"
      href="https://file.hstatic.net/1000026716/file/favicon_0db2583fad1443e482491c7db08765e6.png"
      type="image/x-icon"
    />
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous"
    ></script>

    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <link
      href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="header_navigation sticky-top">
      <header>
        <div class="container">
          <div class="row">
            <div class="col-2">
              <div class="logo__shop">
                <a th:href="@{/}" class="logo__shop-link">
                  <img
                    src="//theme.hstatic.net/1000026716/1000440777/14/logo.svg?v=28697"
                    alt=""
                    class="logo__shop-link--image"
                  />
                </a>
              </div>
            </div>
            <div class="col-10">
              <div class="action__info">
                <div class="row">
                  <div class="col-6">
                    <form th:action="@{/search}" class="search__form">
                      <input
                        type="text"
                        name="keyword"
                        th:value="${keyword}"
                        placeholder="Nhập mã hoặc tên sản phẩm..."
                      />
                      <button type="submit" class="search__btn">
                        <i class="bx bx-search"></i>
                      </button>
                    </form>
                  </div>
                  <div class="col-6">
                    <div class="row action__info-user">
                      <div class="col" sec:authorize="isAnonymous()">
                        <a th:href="@{/register}"
                          ><i class="bx bxs-edit"></i>Đăng ký</a
                        >
                      </div>
                      <div class="col">
                        <div sec:authorize="isAuthenticated()">
                          <a th:href="@{/personal-info}" style="color: red"
                            ><i class="bx bxs-user-circle"></i>
                            <p th:text="${userName}"></p
                          ></a>
                        </div>
                        <div sec:authorize="isAnonymous()">
                          <a th:href="@{/login}"
                            ><i class="bx bxs-user-circle"></i>Đăng nhập</a
                          >
                        </div>
                      </div>
                      <div class="col">
                        <a href=""><i class="bx bxs-discount"></i>Khuyến mãi</a>
                      </div>
                      <div class="col">
                        <div sec:authorize="isAuthenticated()">
                          <p hidden th:text="${#authentication.name}"></p>
                          <a th:href="@{/shopping-cart/views}"
                            ><i class="bx bxs-cart"
                              ><div class="number_product">
                                <span th:text="${countItem}"></span></div></i
                            >Giỏ hàng</a
                          >
                        </div>
                        <div sec:authorize="isAnonymous()">
                          <a th:href="@{/login}"
                            ><i class="bx bxs-cart"
                              ><div class="number_product">0</div></i
                            >Giỏ hàng</a
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="action__contact">
                <ul class="action__contact_list">
                  <li>
                    <a href=""><i class="bx bxs-phone-call"></i>TỔNG ĐÀI</a>
                  </li>
                  <li>
                    <a href=""><i class="bx bxl-youtube"></i>VIDEO</a>
                  </li>
                  <li>
                    <a href=""><i class="bx bx-news"></i>TIN CÔNG NGHỆ</a>
                  </li>
                  <li>
                    <a href=""><i class="bx bx-user"></i>TUYỂN DỤNG</a>
                  </li>
                  <li>
                    <a href=""><i class="bx bxs-store"></i>HỆ THỐNG SHOWROOM</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- DONE HEADER -->
      <div class="navigation">
        <div class="container">
          <div class="row">
            <div class="col-2">
              <div class="col-2-container">
                <a href=""><i class="bx bx-menu"></i>Danh mục sản phẩm</a>
              </div>
            </div>
            <div class="col-10">
              <div class="row">
                <div class="col">
                  <div class="col-container">
                    <a th:href="@{/guidepayment}"
                      ><i class="bx bx-money-withdraw"></i>HƯỚNG DẪN THANH
                      TOÁN</a
                    >
                  </div>
                </div>
                <div class="col">
                  <div class="col-container">
                    <a th:href="@{/installment}"
                      ><i class="bx bxs-bank"></i>HƯỚNG DẪN TRẢ GÓP</a
                    >
                  </div>
                </div>
                <div class="col">
                  <div class="col-container">
                    <a th:href="@{/warranty}"
                      ><i class="bx bx-check-shield"></i>CHÍNH SÁCH BẢO HÀNH</a
                    >
                  </div>
                </div>
                <div class="col">
                  <div class="col-container">
                    <a th:href="@{/delivery}"
                      ><i class="bx bxs-package"></i>CHÍNH SÁCH VẬN CHUYỂN</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- DONE HEADER NAVIGATION -->
    <div class="cart_section">
      <div class="container">
        <div class="row">
          <!-- <h3>Giỏ hàng trống!</h3>
          <p>Thêm sản phẩm vào giỏ và quay lại trang này để thanh toán nhé</p>
          <div class="cart_empty_img">
            <img
              src="	https://omnisales.worldfone.vn/portal/upload/livechat/logo/G-bot-1-190x155.png"
              alt=""
            />
          </div> -->
          <!-- EMPTY CART -->
          <h3>GIỎ HÀNG</h3>
          <form
            th:action="@{/shopping-cart/item/save}"
            method="post"
            th:object="${cartItemDtoForm}"
          >
            <table class="text-center">
              <thead>
                <tr>
                  <th class="item">Sản phẩm</th>
                  <th class="item_name">Tên sản phẩm</th>
                  <th class="item_number">Số lượng</th>
                  <th class="item_price">Giá tiền</th>
                  <th class="item_price">Giảm giá</th>
                  <th class="item_delete">Xóa</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="item, iterStat : ${cartItemDtoForm.cartItemDtos}">
                  <div hidden><input 
                    th:text="${item.cartItemId}"
                    th:field="*{cartItemDtos[__${iterStat.index}__].cartItemId}"
                  ></input></div>
                  <p hidden th:text="${item.productId}"></p>
                  <td>
                    <div class="item_img">
                      <a
                        href=""
                        style="
                          max-width: 200px;
                          max-height: 200px;
                          display: inline-block;
                        "
                      >
                        <img th:src="@{'/images/' + ${item.imageUrl}}" alt="" />
                      </a>
                    </div>
                  </td>
                  <td>
                    <a
                      th:href="@{/{productType}/{id}(productType=${item.productType}, id=${item.productId})}"
                      class="product_name"
                      th:text="${item.name}"
                    ></a>
                  </td>
                  <td>
                    <input
                      type="number"
                      size="4"
                      min="1"
                      th:value="${item.quantity}"
                      th:field="*{cartItemDtos[__${iterStat.index}__].quantity}"
                    />
                  </td>
                  <td>
                    <p th:text="${item.price}+ đ"></p>
                  </td>
                  <td>
                    <p th:text="${item.discount}+ '%'"></p>
                  </td>
                  <td>
                    <a
                      th:href="@{/shopping-cart/remove-item/{id}(id=${item.cartItemId})}"
                      class="delete_btn"
                      ><i class="bx bxs-trash"></i>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td colspan="5">
                    <p class="total_price">Tổng tiền:</p>
                  </td>
                  <td>
                    <p
                      class="total_price text-danger"
                      th:text="${totalMoney} + đ"
                    ></p>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="text-center my-3 "><button type="submit" class="rounded">Cập nhật sản phẩm</button></div>
            
            <div id="cart_submit_btn">
              <a th:href="@{/shopping-cart/checkout}"
                >Điền thông tin thanh toán</a
              >
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- END CART -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col">
            <h4>Thông tin liên hệ</h4>
            <div class="email_shop">
              <p><a href="">sales@thenewxgear.com</a></p>
              <p><a href="">support@thenewxgear.com</a></p>
            </div>
            <div class="schedule_working">
              <p>HCM : Thứ 2 - Thứ 7 09h:00 - 20h:00</p>
              <p>HCM : Chủ nhật 09h:00 - 19h:00</p>
              <p>HN : Thứ 2 - Thứ 7 09h:00 - 20h:00</p>
              <p>HN : Chủ nhật 09h:00 - 19h:00</p>
            </div>
            <div class="confirm_logo">
              <a href=""><img src="./images/bocongthuong.png" alt="" /></a>
              <a href=""><img src="./images/dmca.png" alt="" /></a>
            </div>
          </div>
          <div class="col">
            <h4>Hệ thống cửa hàng</h4>
            <p class="location">
              <i class="bx bxs-location-plus"></i>
              78-80-82 Hoàng Hoa Thám, Phường 12, Quận Tân Bình.
            </p>
            <p class="location">
              <i class="bx bxs-location-plus"></i>
              905 Kha Vạn Cân, Phường Linh Tây, Thành phố Thủ Đức.
            </p>
            <p class="location">
              <i class="bx bxs-location-plus"></i>
              162 - 164 Thái Hà, Phường Trung Liệt, Quận Đống Đa, Hà Nội
            </p>
          </div>
          <div class="col">
            <h4>Đăng ký nhận bản tin</h4>
            <form action="" class="email_contact_form">
              <input type="email" placeholder="Nhập email của bạn" />
              <button type="submit">Gửi</button>
            </form>
            <h4>Hỗ trợ thanh toán</h4>
            <div class="support_pay">
              <div class="row">
                <div class="col"><img src="./images/visa.png" alt="" /></div>
                <div class="col"><img src="./images/jcb.png" alt="" /></div>
                <div class="col"><img src="./images/visa_2.png" alt="" /></div>
                <div class="col"><img src="./images/atm.png" alt="" /></div>
              </div>
              <div class="row">
                <div class="col"><img src="./images/grab.png" alt="" /></div>
                <div class="col"><img src="./images/pay.png" alt="" /></div>
                <div class="col"><img src="./images/momo.png" alt="" /></div>
                <div class="col"><img src="./images/zalo.png" alt="" /></div>
              </div>
            </div>
          </div>
          <div class="col contact_link">
            <h4>Liên kết nhanh</h4>
            <div class="row">
              <div class="col"><a href="">Về chúng tôi</a></div>
              <div class="col"><a href="">Sản phẩm</a></div>
            </div>
            <div class="row">
              <div class="col"><a href="">Liên hệ</a></div>
              <div class="col"><a href="">Tin Tức</a></div>
            </div>
            <h4>Hướng dẫn mua hàng</h4>
            <p><a href="">Cách thức mua hàng</a></p>
            <p><a href="">Chính sách thu hồi hàng hóa</a></p>
            <p><a href="">Chính sách bảo hành</a></p>
            <p><a href="">Hình thực thanh toán</a></p>
          </div>
        </div>
      </div>
    </footer>
    <!-- End Footer -->
  </body>
  <script src="script.js"></script>
</html>
